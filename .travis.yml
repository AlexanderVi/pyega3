sudo: false
language: python
python:
- '3.4'
env:
- TEST_SUITE='coverage run --source=pyega3 setup.py test'
install:
- pip install -r requirements.txt
- pip install python-coveralls
script:
- echo $TEST_SUITE
- echo $TEST_SUITE > test.sh
- bash test.sh
after_success:
- coverage report
- coveralls
- python setup.py sdist
deploy:
  provider: pypi
  server: https://test.pypi.org/legacy/
  user: ega
  password:
    secure: vS9teXPUS562UpkdjaDo48FigCNxuZw90vNf0iWhK2JiP4+apbJg9Q5Say/NDuzQtCut1qo549MCVK1x5bkcTvAkUDMsYnP3qLiyKSzaVHCvcS4075iVwb1rTD6bZlEnQUiNRdME+DDTqblc+aUdbpVELOU5y6+Ce6gRz/4hGKVJ2ZiJKefdG4xZHvwBOpKOuy7a+FesV07nZwwlvGfXXMiNQLycSjzkpSdv0lNNCzYBiHArdQwKarAC9CZcjoxKoyVMzZ3lDQEbwiNTXZ+/elnbGh3Sno1P6ZiQHAsUXDWGFhdZ/RKt4zTY9XB1ON1DZhcNsCCl8BNPEXcnKpu6dA4Kh0Lz4mrAMAzc0PXWDKNw2wBlvF7QbpAEYganaz3cvhsCOCR3sHlYGCRK2IMPueaGiLOaIT86/HdCp4PNhVrsFKGyt8fu3n73x70qOrrZjOTc4riYjZGp+H1GkEzuVbFnj/bJpGmf/ttc5ZDJxw8KNxU/whtLXWinZkIPmljElfJBuVVUB3OfWdTvQrv8nAVKmYvyroAIWyTjhRT2Al412JlEI21kmAUEwUn/pKT1vKMBUk9n+FS9KeNHFcZUFXQTbcmLePcCgJD0a1g8o5OgAKNoYmN96woZF+2HkSeUAfhbF8Zb85aIxRiPusSHm62Ct4IM+iTUkcvHd97+IxM=
  on:
    tags: true
