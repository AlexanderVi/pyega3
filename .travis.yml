sudo: false
language: python
python:
- '3.4'
env:
- TEST_SUITE='coverage run --source=pyega3 setup.py test'
install:
- pip install -r requirements.txt
- pip install python-coveralls
script:
- echo $TEST_SUITE
- echo $TEST_SUITE > test.sh
- bash test.sh
after_success:
- coverage report
- coveralls
- python setup.py sdist
deploy:
  provider: pypi
  server: https://test.pypi.org/legacy/
  user: ega
  password:
    secure: cUO6a6o1MGUR2e5Hgyck7hq3kLOBxzLW8sERgemI6NSNCDA13q8SjVu8NRCyt+0Ck4ZIcuUDkHUJryhT4G0u4tT3UbiqGBfoQ0EGdceVbGD6ZB4OrGsTAxOTKX+jIgSRSsKcOyaV/HB+NWQUqlTThUeSd3EZ61JqrBdP0QRP5t3YWRPTmqRxK4zI0+RRkzWSRtDMdCBV3yYP/S411t8cIKAoiygn2dkUqccB6RxxwOj6kHa5WZxw42whq45ozTWtc/OMWFDuBg22zhOspwUMQfT+bPkriOReb6MnZ2jn+aMPBXZ9EOaho1Jcgs9HfzauaLvwkzGrrJuZ4HPNIXAK5HhffeM/KeMnVJeh1GkpcxKlM5SzU3uNEbikBtF0jH/smUkh/ptrkzbpl82auciQz3Lwgv/KCRP9mBnViSIqNZmYZV6hpK1owUwgjXw2Mxm7Nk8AevPLpeEekBwMMn8CMgF1A7yzu+/BWnE9Q1+B+ateBmSb6NXJaQhxMSJP8Z7Pv/6AfEjSsC4hC4pYA0u87BT+IKy0BLXNH4VS8jcmIB1ibkhRQkdnwWrjGjK3jgS2AdKWU3YkDNf7qUrH/0Q71vNtKWkn18Ct9rSvRbxcYe9IDICdNcHtYOUq9+j4qmobQjsihECE+e5/qmguycUMXo8fWjjVCKAuDOmsKd1LOZM=
  on:
    tags: true
