sudo: false
language: python
python:
- '3.4'
env:
- TEST_SUITE='coverage run --source=pyega3 setup.py test'
install:
- pip install -r requirements.txt
- pip install python-coveralls
script:
- echo $TEST_SUITE
- echo $TEST_SUITE > test.sh
- bash test.sh
after_success:
- coverage report
- coveralls
- python setup.py sdist
deploy:
  provider: pypi
  server: https://test.pypi.org/legacy/
  user: ega
  password:
    secure: MtCbfI+txNybifJVZlIKW1OIhjYjxBGFIfjVdqSsNHyiV4Plo1TI4HlJF6wggYiipn+G97jJZq4+7BhMrLKujTyH8qMRdiBnAyiHRhSGlMeUoiAG1H53pwSuME5kRJJUyT4fm+HypvLigeTvZIUlhYNXs3/Z9XfvjJscCDFuDR216pswDlVN1oDQgDtFOTTx3oZksFxxTo96yrh3GQVmvLFzmKEVI32GrghPFHFFvR5lb2SAfB+7eJhQk7P6e1KfbH/89zF5S0+fzSHSpgayt/T4dIUjl5qFR/pzD+sFi3hKo+oZVdglQqHdpYpp6C3Kl21ednGQarCjZItSeYBZ7Hc7B2TckBQZL3OANvoFArpiLHoAlsM89BFEhvLxWGSFhVi6plGJMLw8A2imK3I2J1+zRHrnN5e2iNqkgzufu3tZADioBUlgxYMHAsj3o7BLFg2zKBjzlYZR5/HLWElH4CzDgyVIdSB1KGlzTCJBXEtjYLA6/ZpIQmsTqD5VW3RbfiYAl+7aytcLBtaKmSCVMGpWTXwxl69/zR1kr59GYZaAK+cTK5TTiTPwS+t2QAt39Ebw9V+QIiHmDi2vaMEqqMNrnUITFw97UVawvY7SSyKGFaxfRZmW1oHTRlaMhFHzyO7VErAFkeGrF+ePNB0qjjs2Z7ANcaSqenamjmHS/pA=
  on:
    tags: true
